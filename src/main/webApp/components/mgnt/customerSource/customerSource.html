<style>

.thumb {
    width: 100px;
    height: 100px;
    float: none;
    position: relative;
    top: 7px;
    margin-bottom: 20px;
}

form .progress {
    line-height: 15px;
}
}

.progress {
    display: inline-block;
    width: 100px;
    border: 3px groove #CCC;
}

.progress div {
    font-size: smaller;
    background: orange;
    width: 0;
}

.bt {
  background: #FE980F;
  border: medium none;
  border-radius: 0;
  margin-left: -5px;
  margin-top: -3px;
  padding: 7px 17px;
}


</style>
<link href="css/main2.css" rel="stylesheet">
<section class="shopping-cart spad" style="padding-top: 0px;">
	<div class="container" ng-cloak>
		<h3 style="margin-bottom: 20px;text-align: center;">Customer Source </h3>

		<!-- Config Nav tabs -->
		<ul class="nav nav-tabs" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" data-toggle="tab" href="" data-target="#detail">Detail</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" data-toggle="tab" href="" data-target="#source">All</a>
			</li>
		</ul>
		<!-- config Tab panes -->
		<div class="tab-content">
			<div id="detail" class="container tab-pane active" style="padding-left: 0px;padding-right: 0px;">
				<br>
				<!-- insert Config -->
				<div class="row" style="margin-bottom: 30px;">
					<div class="col-md-1">
						<input type="number"  ng-model="ctrl.theOneReport.id" disabled="disabled" placeholder="id" style="width:60px;"/>
					</div>
					<div class="col-md-2">
						<input type="text"  ng-model="ctrl.theOneReport.year" placeholder="year" style="width: 100%;"/>
					</div>
					<div class="col-md-2">
						<input type="text"  ng-model="ctrl.theOneReport.month" placeholder="month" style="width: 100%;"/>
					</div>
					<div class="col-md-1">
						<input type="text"  ng-model="ctrl.theOneReport.count" placeholder="count" style="width: 100%;"/>
					</div>
					<div class="col-md-1">
						<select  ng-model="ctrl.queryRequest.shopCode"
								 ng-options="opt.shopCode as opt.shopAddress +' | '+ opt.shopName for opt in ctrl.shopList "
								 style="width: 100%;height: 30px;border: 1px solid rgb(118 118 118);border-radius: 3px;background: #FFFFFF;">
						</select>
					</div>


					<div class="col-md-3">
						<a ng-click="ctrl.upsertReport(ctrl.theOneReport)" href="" class="btn btn-default check_out" style="margin: 0px 0px 0px 0px;">Save</a>
						<a ng-click="ctrl.calculateReport(ctrl.theOneReport)" href="" class="btn btn-default check_out" style="margin: 0px 0px 0px 0px;">cal</a>
						<a ng-click="ctrl.clearTheOneReport()" href="" class="btn btn-default check_out" style="margin: 0px 0px 0px 0px;">clear</a>
					</div>
					<div class="col-md-1">
						<div class="alert alert-success" role="alert" ng-show="ctrl.responseStr"
							 style="margin: 0px 0px 0px 0px;width: 120px;height: 0px;padding: 5px 0px 25px 10px;">
							<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
							<span class="sr-only"></span>
							thành công
						</div>
						<div class="alert alert-danger" role="alert" ng-show="ctrl.responseStrFail"
							 style="margin: 0px 0px 0px 0px;width: 120px;height: 0px;padding: 5px 0px 25px 10px;">
							<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
							<span class="sr-only"></span>
							thất bại
						</div>
					</div>
				</div>
				<!--data table-->
				<div class="table-responsive">
					<table ng-table="ctrl.reportByYearParams" class="table table-bordered table-hover table-striped" show-filter="true">
						<tr ng-repeat="one in $data">
							<td title="'id'" filter="{ 'id': 'number'}" sortable="'id'" style="width:80px;text-align: center;">
								<a href="" ng-click="ctrl.setTheOneReport(one)">{{one.id}}</a>
							</td>
							<td title="'year'" filter="{ 'year': 'text'}" sortable="'year'"  style="width:180px;">
								{{one.year}}
							</td>
							<td title="'month'" filter="{ 'month': 'text'}" sortable="'month'"  style="width:180px;">
								{{one.month}}
							</td>
							<td title="'source'" filter="{ 'sourceName': 'text'}" sortable="'sourceName'"  style="width:180px;">
								{{one.sourceName}}
							</td>
							<td title="'count'" filter="{ 'count': 'number'}" sortable="'count'"  style="width:180px;">
								{{one.count}}
							</td>
							<td title="'Create'" filter="{ 'gmtCreate' : 'text'}" sortable="'gmtCreate'" >
								{{one.gmtCreate | date:"yyyy-MM-dd hh:mm:ss"}}
							</td>
							<td title="'delete'" style="width:100px;" >
								<!--<a ng-click="ctrl.deleteOne(one)" href="" class="btn btn-default check_out" style="margin: 0px 0px 0px 0px;">delete</a>-->
							</td>
						</tr>
					</table>
				</div>

				<div class="row" style="text-align: center;" ng-show="!ctrl.customerSourceList">
					<div class="col-sm-6"></div>
					<div  class="loaderAni"></div>
				</div>

			</div>
			<div id="source" class="container tab-pane" style="padding-left: 0px;padding-right: 0px;">
				<br>
				<div class="row" style="margin-bottom: 30px;">
					<div class="col-md-1">
						<input type="number"  ng-model="ctrl.theOne.id" disabled="disabled" placeholder="id" style="width:60px;"/>
					</div>
					<div class="col-md-2">
						<input type="text"  ng-model="ctrl.theOne.name" placeholder="name" style="width: 100%;"/>
					</div>
					<div class="col-md-1">
						<select  ng-model="ctrl.queryRequest.shopCode"
								 ng-options="opt.shopCode as opt.shopAddress +' | '+ opt.shopName for opt in ctrl.shopList "
								 style="width: 100%;height: 30px;border: 1px solid rgb(118 118 118);border-radius: 3px;background: #FFFFFF;">
						</select>
					</div>

					<div class="col-md-2">
						<a ng-click="ctrl.upsert(ctrl.theOne)" href="" class="btn btn-default check_out" style="margin: 0px 0px 0px 0px;">Save</a>
						<a ng-click="ctrl.clear()" href="" class="btn btn-default check_out" style="margin: 0px 0px 0px 0px;">clear</a>
					</div>
					<div class="col-md-1">
						<div class="alert alert-success" role="alert" ng-show="ctrl.responseStr"
							 style="margin: 0px 0px 0px 0px;width: 120px;height: 0px;padding: 5px 0px 25px 10px;">
							<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
							<span class="sr-only"></span>
							thành công
						</div>
						<div class="alert alert-danger" role="alert" ng-show="ctrl.responseStrFail"
							 style="margin: 0px 0px 0px 0px;width: 120px;height: 0px;padding: 5px 0px 25px 10px;">
							<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
							<span class="sr-only"></span>
							thất bại
						</div>
					</div>
					<div class="col-md-5" style="text-align: end;">
						total:{{ctrl.totalCount}}
					</div>
				</div>

				<!--data table-->
				<div class="table-responsive">
					<table ng-table="ctrl.tableParams" class="table table-bordered table-hover table-striped" show-filter="true">
						<tr ng-repeat="one in $data">
							<td title="'id'" filter="{ 'id': 'number'}" sortable="'id'" style="width:80px;text-align: center;">
								<a href="" ng-click="ctrl.setTheOne(one)">{{one.id}}</a>
							</td>
							<td title="'name'" filter="{ 'name': 'text'}" sortable="'name'"  style="width:180px;">
								<a href="" ng-click="ctrl.setTheOne(one)">{{one.name}} </a>
							</td>
							<td title="'count'" filter="{ 'count': 'number'}" sortable="'count'"  style="width:100px;">
								{{one.count}}
							</td>
							<td title="'%'" filter="{ 'percent': 'number'}" sortable="'percent'"  style="width:100px;text-align:end;">
								{{one.percent |  number:2}}%
							</td>
							<td title="'Create date'" filter="{ 'gmtCreate' : 'text'}" sortable="'gmtCreate'" >
								{{one.gmtCreate | date:"yyyy-MM-dd hh:mm:ss"}}
							</td>

							<td title="'delete'" style="width:100px;" >
								<!--<a ng-click="ctrl.deleteOne(one)" href="" class="btn btn-default check_out" style="margin: 0px 0px 0px 0px;">delete</a>-->
							</td>
						</tr>
					</table>
				</div>





			</div>
		</div>

		<!--more tab-->
		<ul class="nav nav-tabs {{ctrl.isClickOrderRecovery ? 'active' : ''}}"  role="tablist" style="padding-top: 20px;">
			<li class="nav-item">
				<a class="nav-link" data-toggle="tab" href="" data-target="#more"
				   ng-click="ctrl.isClickOrderRecovery = ctrl.isClickOrderRecovery ? false : true;">more</a>
			</li>
		</ul>
		<div class="tab-content">
			<div id="more" class="container tab-pane {{ctrl.isClickOrderRecovery ? 'active' : ''}}">
				<div class="row" style="margin-top: 20px;margin-bottom: 20px;">

					<div class="col-sm-6" style="text-align: left;">
						config:
						<select  ng-model="ctrl.queryRequest.generalPurpose"
								 ng-options="opt for opt in ctrl.yearList "
								 ng-change="ctrl.loadCusSourceData()"
								 style="width: 15%;height: 35px;border: 1px solid rgb(118 118 118);border-radius: 4px;background: #FFFFFF;">
						</select>

						<select  ng-model="ctrl.queryRequest.shopCode"
								 ng-options="opt.shopCode as opt.shopAddress +' | '+ opt.shopName for opt in ctrl.shopList "
								 ng-change="ctrl.loadCusSourceData()"
								 style="width: 20%;height: 35px;border: 1px solid rgb(118 118 118);border-radius: 4px;background: #FFFFFF;">
						</select>
					</div>
					<div class="col-sm-6"></div>

				</div>
				<div>updated: {{ctrl.lastCustomerSourceCalculationTime | date:"yyyy-MM-dd HH:mm:ss"}}</div>
			</div>
		</div>


	</div>
</section>